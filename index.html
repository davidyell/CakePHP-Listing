<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Cakephp-listing by davidyell</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/davidyell/CakePHP-Listing">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/davidyell/CakePHP-Listing/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/davidyell/CakePHP-Listing/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>CakePHP-Listing</h1>
          <p>Model behaviour to append a name to a select</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/davidyell">davidyell</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <div id="content">

          <h3>CakePHP Listing Behaviour</h3>
          <p>This is a behaviour that I've written to group items in a select field into optgroups so that a large selection of data can be displayed to users whilst maintaining the relations between the data and it's parents.</p>
          <p>It came about because in most CMS you are always listing a selection of items, such as tags, categories, or attributes but you might want to only allow certain groupings to be added.</p>

          <h3>What's it for?</h3>
          <p>By default using <code>$this->Model->find('list');</code> will always just return a list of items in the format of <code>array('id' => 'field');</code> which doesn't add any extra information.</p>
          <p>The behaviour converts this into a grouped set of data instead.</p>

          <div class="figure">
            <img src="https://a248.e.akamai.net/camo.github.com/c42495fce7f573834428553817e1cf8ecde2b535/687474703a2f2f692e696d6775722e636f6d2f51503742684d6c2e706e67" alt="Example image of select"><br>
            <small>The behaviour in a regular select element</small>
          </div>
          <div class="figure">
            <img src="https://a248.e.akamai.net/camo.github.com/fcea2cfc821ffc18d274ea22579c0f1953cf0d35/687474703a2f2f692e696d6775722e636f6d2f317431735276492e706e67" alt="Example image of multiselect"><br>
            <small>It even works with multiselect too!</small>
          </div>

          <h3>Requirements</h3>
          <ul>
            <li>CakePHP 2.x+</li>
            <li>Containable enabled on the model</li>
          </ul>

          <h3>How do I install it?</h3>
          <p>By finding this site you've probably already found the repository, but you can find the source code for the plugin on Github. There are links in the top navigation.</p>
          <p>There are a number of options for getting the code. </p>

          <h4>Download</h4>
          <p>Download an archive of the plugin and extract it to your <code>app/Plugin/Listing</code> folder.</p>
          <h4>Git</h4>
          <p>You can clone the repository into your <code>app/Plugin/Listing</code> folder.</p>
          <p><pre><code>$ git clone https://github.com/davidyell/CakePHP-Listing.git app/Plugin/Listing</code></pre></p>
          <p>It's also possible to add the plugin as a submodule.</p>
          <p><pre><code>$ git submodule add https://github.com/davidyell/CakePHP-Listing.git app/Plugin/listing</code></pre></p>
          <h4>Composer</h4>
          <p>The plugin is available on Packagist for inclusion in projects using <a href="http://getcomposer.org/">Composer</a>.</p>
          <p><a href="https://packagist.org/packages/davidyell/listing" title="Plugin on Packagist">https://packagist.org/packages/davidyell/listing</a></p>

          <h3>Setup</h3>
          <p>Firstly you need to load the plugin in your <code>app/Config/bootstrap.php</code> using <code>CakePlugin::load('Listing.Listable');</code>. If you are already using <code>CakePlugin::loadAll();</code> then the plugin will already be loaded.</p>
          <p>The model you want to attach the behaviour to will need to have the <code>Containable</code> behaviour. I tend to add this to my <code>Model/AppModel.php</code> so that it's available everywhere for ease of use.</p>
          <p>Configure your models behaviours
<pre><code>public $actsAs = array(
    'Containable', // If you've not added it to AppModel
    'Listing.Listable' => array(
        'relatedModelName' => 'Model', 
        'relatedModelPrimaryKey' => 'id', // Optional - default shown
        'relatedModelDisplayField' => 'name' // Optional - default shown
    )
);</pre></code>
          </p>
          <p><code>relatedModelName</code> is the name of the model that you want to group items by. It will need to be related to the model you are working in. This will usually be a <code>belongsTo</code> relationship.</p>
          <p><code>relatedModelDisplayField</code> is the name of the field that you want to display in the select element.</p>

          <h3>How do I use it?</h3>
          <p>Once you have completed the setup, and your behaviours are attached. You will want to create a listing and pass it to the view.</p>
          <p>In your controllers method you need to use the custom find method <code>listing</code>.</p>
<pre><code>$items = $this->Model->find('listing');
$this->set('items', $items);
</pre></code>
          <p>In your view, if your field isn't automatic you can add the new listing items to your field.</p>
<pre><code>$this->Form->input('field', array('type' => 'select', 'options' => $items));</code></pre>

          <h3>Version, Tests and Contributing</h3>
          <p>Currently in beta stage, it's reliable and it works, but you never know.<p>
          <p>There are Tests written which achieve 96.88% coverage.</p>
          <p>The project is setup on Travis CI and is currently, <img src="https://travis-ci.org/davidyell/CakePHP-Listing.png?branch=master" alt="Travis status"></p>
          <h4>Contributions and issues</h4>
          <p>If you find any issues, bug or would like to contribute code, please either <a href="https://github.com/davidyell/CakePHP-Listing/issues?state=open">submit a ticket</a> or <a href="https://github.com/davidyell/CakePHP-Listing">fork</a> and create a pull request.</p>
          <p>Please ensure that pull requests are submitted to the <code>develop</code> branch.</p>

        </div>

      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>